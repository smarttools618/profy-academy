<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مولد القوالب التعليمية الاحترافي</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Libraries for PDF Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

    <!-- Loading Spinner Overlay -->
    <div id="loader-overlay">
        <div class="spinner"></div>
        <p>جاري إنشاء ملف PDF...</p>
    </div>

    <div class="controls-container">
        <h2>إعدادات القالب</h2>
        <div class="form-grid">
            <div class="form-group">
                <label for="teacherName">اسم الأستاذ:</label>
                <input type="text" id="teacherName" placeholder="مثال: نجيب المستوري" value="نجيب المستوري">
            </div>
            <div class="form-group">
                <label for="subject">المادة:</label>
                <input type="text" id="subject" placeholder="مثال: الفرنسية" value="الفرنسية">
            </div>
            <div class="form-group">
                <label for="lessonTitle">عنوان الدرس:</label>
                <input type="text" id="lessonTitle" placeholder="مثال: Production-écrite" value="Production-écrite">
            </div>
            <div class="form-group">
                <label for="gradeLevel">المستوى الدراسي:</label>
                <select id="gradeLevel">
                    <option value="1">السنة الأولى</option>
                    <option value="2">السنة الثانية</option>
                    <option value="3">السنة الثالثة</option>
                    <option value="4" selected>السنة الرابعة</option>
                    <option value="5">السنة الخامسة</option>
                    <option value="6">السنة السادسة</option>
                    <option value="7">السنة السابعة</option>
                    <option value="8">السنة الثامنة</option>
                    <option value="9">السنة التاسعة</option>
                </select>
            </div>
             <div class="form-group">
                <label for="textDirection">اتجاه محتوى الملف:</label>
                <select id="textDirection">
                    <option value="ltr">يسار إلى يمين (لاتيني)</option>
                    <option value="rtl">يمين إلى يسار (عربي)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="mainTitle">العنوان الرئيسي (اختياري):</label>
                <input type="text" id="mainTitle" placeholder="مثال: préparons-nous à la 4ème année" value="préparons-nous à la 4ème année">
            </div>
            <div class="form-group file-upload">
                <label for="docxFile">اختر ملف Word (.docx):</label>
                <input type="file" id="docxFile" accept=".docx" required>
            </div>
            <div class="form-group file-upload">
                <label for="watermarkFile">اختر صورة العلامة المائية (اختياري):</label>
                <input type="file" id="watermarkFile" accept="image/png, image/jpeg">
            </div>
            <div class="form-group">
                <label for="footerPhone">رقم الهاتف في التذييل:</label>
                <input type="text" id="footerPhone" placeholder="مثال: 98748831" value="98748831">
            </div>
            <div class="form-group">
                <label for="footerEmail">البريد الإلكتروني في التذييل:</label>
                <input type="email" id="footerEmail" placeholder="مثال: sanaalbouchi@gmail.com" value="sanaalbouchi@gmail.com">
            </div>
            <div class="form-group">
                <label>خيارات متقدمة:</label>
                <div style="display:flex;flex-direction:column;gap:6px;">
                    <label><input type="checkbox" id="optIncludePageNumbers" checked> تضمين أرقام الصفحات</label>
                    <label><input type="checkbox" id="optUseDocxTheme" checked> استخدام ألوان ملف Word (إن وُجدت)</label>
                    <label><input type="checkbox" id="optHighResPdf" checked> PDF عالِ الدقة (مضاعف التحجيم)</label>
                </div>
            </div>
        </div>
        <div class="buttons">
            <button id="generateBtn">إنشاء القالب</button>
            <button id="downloadPdfBtn">حفظ كملف PDF</button>
        </div>
        <div class="form-group">
        <label for="lang-select">اللغة:</label>
        <select id="lang-select">
            <option value="ar">العربية</option>
            <option value="fr">Français</option>
            <option value="en">English</option>
        </select>
    </div>
    </div>

    <!-- هذا هو القالب الذي سيتم ملؤه -->
    <div class="controls-meta">
        <div>معاينة الصفحات: <span id="pageCount">1</span></div>
    </div>
    <div id="page-container" class="page-container">
        <div id="watermark-overlay"></div>
        <header class="page-header">
            <div class="header-info right">الأستاذ : <span id="output-teacher"></span></div>
            <div class="header-info left" id="output-grade"></div>
            
            <div class="header-pills">
                <div class="pill-wrapper left">
                    <div class="pill">
                        <span class="pill-title">الدرس</span>
                        <span class="pill-content" id="output-lesson"></span>
                    </div>
                </div>
                <div class="pill-number">1</div>
                <div class="pill-wrapper right">
                     <div class="pill">
                        <span class="pill-title">المادة</span>
                        <span class="pill-content" id="output-subject"></span>
                    </div>
                </div>
            </div>
            <h1 class="main-title" id="output-main-title"></h1>
        </header>

        <main id="content-output">
            <div id="content-wrapper">
                <p style="color:#aaa; text-align:center; padding-top: 50px;">سيتم عرض المحتوى هنا بعد اختيار الملف أو إدخال المعلومات</p>
            </div>
        </main>

        <footer class="page-footer">
            <div class="contact-info">
                <span>&#9742;</span> <span id="footer-phone-output"></span>
            </div>
            <div class="page-number"></div>
            <div class="contact-info">
                <span>&#9993;</span> <span id="footer-email-output"></span>
            </div>
        </footer>
    </div>

    <!-- Multi-page preview will be rendered here when content is long -->
    <div id="multiPreview" class="multi-preview" aria-hidden="true"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.5.0/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="script.js"></script>

</body>
</html>